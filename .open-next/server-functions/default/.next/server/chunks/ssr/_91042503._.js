module.exports=[210,a=>{"use strict";let b=(0,a.i(70106).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],210)},33095,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={default:function(){return k},getImageProps:function(){return j}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(33354),g=a.r(94915),h=a.r(67161),i=f._(a.r(2305));function j(a){let{props:b}=(0,g.getImgProps)(a,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[a,c]of Object.entries(b))void 0===c&&delete b[a];return{props:b}}let k=h.Image},71987,(a,b,c)=>{b.exports=a.r(33095)},91492,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(70106);let f=(0,e.default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),g=(0,e.default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),h=(0,e.default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var i=a.i(71987);function j({initialData:a,mode:e}){let j=(0,d.useRouter)(),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)([]),[o,p]=(0,c.useState)(a?.images||[]),[q,r]=(0,c.useState)([]),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)([]),[w,x]=(0,c.useState)(a?.id||null),y=async b=>{b.preventDefault(),l(!0);try{let c=new FormData(b.currentTarget),d={address:c.get("address"),city:c.get("city"),state:c.get("state"),zip:c.get("zip"),rentAmount:parseInt(c.get("rentAmount")),bedrooms:parseInt(c.get("bedrooms"))||null,bathrooms:parseFloat(c.get("bathrooms"))||null,propertyType:c.get("propertyType")||null,description:c.get("description")||null},f=w;if("create"===e){let a=await fetch("/api/properties",{method:"POST",body:JSON.stringify(d),headers:{"Content-Type":"application/json"}});if(!a.ok)throw Error("Failed to create property");f=(await a.json()).property.id,x(f)}else{if(!(await fetch("/api/properties",{method:"PUT",body:JSON.stringify({...d,id:a?.id,deletedImageIds:q}),headers:{"Content-Type":"application/json"}})).ok)throw Error("Failed to update property");f=a.id}m.length>0&&f?await z(f,!1):(j.push("/dashboard/properties"),j.refresh())}catch(a){console.error("Error:",a),alert("create"===e?"Failed to create property":"Failed to update property"),l(!1)}},z=async(a,b)=>{let c=new FormData;c.append("propertyId",a),c.append("compress",b.toString()),m.forEach((a,b)=>{c.append(`file${b}`,a)});let d=await fetch("/api/upload",{method:"POST",body:c}),e=await d.json();if(e.needsConfirmation)v(e.oversizedFiles),t(!0),l(!1);else if(e.success)j.push("/dashboard/properties"),j.refresh();else throw Error(e.error||"Upload failed")},A=async()=>{t(!1),l(!0),w&&await z(w,!0)};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("form",{onSubmit:y,className:"space-y-8",children:[(0,b.jsxs)("div",{className:"bg-white p-6 rounded-lg border shadow-sm space-y-6",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold",children:"Property Details"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Street Address *"}),(0,b.jsx)("input",{name:"address",type:"text",required:!0,defaultValue:a?.address,className:"w-full border rounded-md p-2",placeholder:"123 Main St"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"}),(0,b.jsx)("input",{name:"city",type:"text",required:!0,defaultValue:a?.city,className:"w-full border rounded-md p-2",placeholder:"New York"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State *"}),(0,b.jsx)("input",{name:"state",type:"text",required:!0,defaultValue:a?.state,className:"w-full border rounded-md p-2",placeholder:"NY"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Zip Code *"}),(0,b.jsx)("input",{name:"zip",type:"text",required:!0,defaultValue:a?.zip,className:"w-full border rounded-md p-2",placeholder:"10001"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Monthly Rent ($) *"}),(0,b.jsx)("input",{name:"rentAmount",type:"number",required:!0,defaultValue:a?.rentAmount,className:"w-full border rounded-md p-2",placeholder:"2500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bedrooms"}),(0,b.jsx)("input",{name:"bedrooms",type:"number",defaultValue:a?.bedrooms||"",className:"w-full border rounded-md p-2",placeholder:"2"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bathrooms"}),(0,b.jsx)("input",{name:"bathrooms",type:"number",step:"0.5",defaultValue:a?.bathrooms||"",className:"w-full border rounded-md p-2",placeholder:"1.5"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Type"}),(0,b.jsxs)("select",{name:"propertyType",defaultValue:a?.propertyType||"",className:"w-full border rounded-md p-2",children:[(0,b.jsx)("option",{value:"",children:"Select type..."}),(0,b.jsx)("option",{value:"HOUSE",children:"House"}),(0,b.jsx)("option",{value:"APARTMENT",children:"Apartment"}),(0,b.jsx)("option",{value:"CONDO",children:"Condo"}),(0,b.jsx)("option",{value:"TOWNHOUSE",children:"Townhouse"}),(0,b.jsx)("option",{value:"STUDIO",children:"Studio"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,b.jsx)("textarea",{name:"description",rows:4,defaultValue:a?.description||"",className:"w-full border rounded-md p-2",placeholder:"Describe the property..."})]})]}),(0,b.jsxs)("div",{className:"bg-white p-6 rounded-lg border shadow-sm space-y-4",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold",children:"Property Images"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Upload up to 10 images (max 1.5MB each)"}),(0,b.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[(0,b.jsx)("input",{type:"file",accept:"image/jpeg,image/png,image/webp",multiple:!0,onChange:a=>{let b=Array.from(a.target.files||[]);b.length>0&&n(a=>[...a,...b].slice(0,10))},className:"hidden",id:"image-upload"}),(0,b.jsxs)("label",{htmlFor:"image-upload",className:"cursor-pointer",children:[(0,b.jsx)(f,{className:"mx-auto text-gray-400 mb-2",size:48}),(0,b.jsx)("p",{className:"text-gray-600",children:"Click to upload images"}),(0,b.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"JPEG, PNG, WebP"})]})]}),o.length>0&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-gray-700",children:"Current Images"}),(0,b.jsx)("div",{className:"grid grid-cols-4 gap-4",children:o.map(a=>(0,b.jsxs)("div",{className:"relative group",children:[(0,b.jsx)("div",{className:"relative h-32 w-full",children:(0,b.jsx)(i.default,{src:a.url,alt:"Property",fill:!0,className:"object-cover rounded-lg"})}),(0,b.jsx)("button",{type:"button",onClick:()=>{var b;return b=a.id,void(p(a=>a.filter(a=>a.id!==b)),r(a=>[...a,b]))},className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition",children:(0,b.jsx)(g,{size:16})})]},a.id))})]}),m.length>0&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-gray-700",children:"New Images"}),(0,b.jsx)("div",{className:"grid grid-cols-4 gap-4",children:m.map((a,c)=>(0,b.jsxs)("div",{className:"relative group",children:[(0,b.jsx)("div",{className:"relative h-32 w-full",children:(0,b.jsx)(i.default,{src:URL.createObjectURL(a),alt:`Preview ${c+1}`,fill:!0,className:"object-cover rounded-lg"})}),(0,b.jsx)("button",{type:"button",onClick:()=>{n(a=>a.filter((a,b)=>b!==c))},className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition",children:(0,b.jsx)(g,{size:16})}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1 truncate",children:a.name})]},c))})]})]}),(0,b.jsx)("button",{type:"submit",disabled:k,className:"w-full bg-black text-white py-3 rounded-md hover:bg-gray-800 font-medium disabled:opacity-50",children:k?"create"===e?"Creating...":"Updating...":"create"===e?"Create Property":"Update Property"})]}),s&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3 mb-4",children:[(0,b.jsx)(h,{className:"text-orange-500 shrink-0",size:24}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-lg",children:"Images Need Compression"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"The following images exceed 1.5MB and need to be compressed:"})]})]}),(0,b.jsx)("ul",{className:"space-y-2 mb-6",children:u.map((a,c)=>(0,b.jsxs)("li",{className:"flex justify-between text-sm bg-gray-50 p-2 rounded",children:[(0,b.jsx)("span",{className:"truncate",children:a.filename}),(0,b.jsx)("span",{className:"font-medium text-orange-600",children:a.sizeInMB})]},c))}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-6",children:"We can automatically compress these images to meet the size limit while maintaining quality."}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{onClick:()=>{t(!1),l(!1)},className:"flex-1 border border-gray-300 text-gray-700 py-2 rounded-md hover:bg-gray-50",children:"Cancel"}),(0,b.jsx)("button",{onClick:A,className:"flex-1 bg-black text-white py-2 rounded-md hover:bg-gray-800",children:"Compress & Upload"})]})]})})]})}a.s(["PropertyForm",()=>j],91492)},86062,a=>{"use strict";var b=a.i(87924),c=a.i(38246),d=a.i(210),e=a.i(91492);function f(){return(0,b.jsxs)("div",{className:"p-8 max-w-4xl mx-auto",children:[(0,b.jsxs)(c.default,{href:"/dashboard/properties",className:"flex items-center gap-2 text-gray-500 mb-6 hover:text-gray-900",children:[(0,b.jsx)(d.ArrowLeft,{size:20}),"Back to Properties"]}),(0,b.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Add New Property"}),(0,b.jsx)(e.PropertyForm,{mode:"create"})]})}a.s(["default",()=>f])}];

//# sourceMappingURL=_91042503._.js.map